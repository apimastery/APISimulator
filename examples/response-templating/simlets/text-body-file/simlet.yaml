#----------------------------------------------------------------------
# Simlet-specific configuration.
#----------------------------------------------------------------------

matchers:
- method: POST

- where: UriPath
  equals: "/v1/payments/payment"

- header: "Content-Type"
  equals: "application/json"

- where: body
  element: "object/payer/funding_instruments/object/credit_card/number"
  exists: true


CardNumber:
  is: parameter
  from: body
  element: "object/payer/funding_instruments/object/credit_card/number"

CardType:
  is: parameter
  from: body
  element: "object/payer/funding_instruments/object/credit_card/type"

CardExpireMonth: 
  is: parameter
  from: body
  element: "object/payer/funding_instruments/object/credit_card/expire_month"

CardExpireYear:
  is: parameter
  from: body
  element: "object/payer/funding_instruments/object/credit_card/expire_year"

CardholderFirstName:
  is: parameter
  from: body
  element: "object/payer/funding_instruments/object/credit_card/first_name"

CardholderLastName:
  is: parameter
  from: body
  element: "object/payer/funding_instruments/object/credit_card/last_name"

BillingAddressPostalCode:
  is: parameter
  from: body
  element: "object/payer/funding_instruments/object/credit_card/billing_address/postal_code"

BillingAddressCountry:
  is: parameter
  from: body
  element: "object/payer/funding_instruments/object/credit_card/billing_address/country_code"

CreateTimeNow:
  is: parameter
  from: dateTime

PaymentID:
  is: parameter 
  from: uuid


response:
  from: template
  template: Simula
  
  status: 201
  
  headers:
  - "Content-Type: application/json; charset=UTF-8"

  body:
    type: text
    file: 
      path: "${ simlets.path }/text-body-file"
      name: "payment.json"
